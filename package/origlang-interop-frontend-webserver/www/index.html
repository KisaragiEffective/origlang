<!DOCTYPE html>
<html lang="ja">
<head>
    <script type="module" src="./origlang_interop.js"></script>
    <script type="application/wasm" src="origlang_interop_bg.wasm"></script>
    <script>
      // origlang-interopと同期させること！！
      const get_source = () => document.getElementById("src").value;

      const set_compile_error = (s) => {
        document.getElementById("compile_error").value = s;
      };

      const echo = (s) => {
        document.getElementById("output").value += s + "\n";
      };

      const echo_clear = () => {
        document.getElementById("echo").value = "";
      };
    </script>
    <script type="module">
      import init, {run} from "./origlang_interop.js";

      window.addEventListener("DOMContentLoaded", () => {
        document.getElementById("run").addEventListener("click", () => {
          init().then(() => run())
        });
      });
    </script>
    <title>origlang playground</title>
</head>
<body>
<main>
    <!-- TODO: シンタックスハイライト -->
    <label for="src">ソースコード</label><textarea id="src"></textarea>
    <label for="compile_error">コンパイルエラー</label><textarea id="compile_error"></textarea>
    <label for="output">出力結果</label><textarea id="output"></textarea>
    <button id="run">Run!</button>
</main>
</body>
</html>
